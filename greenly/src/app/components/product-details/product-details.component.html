<section class="product-detail-section">
    <div class="container py-5">
        <div class="product-container">
            <!-- Product Gallery -->
            <div class="product-gallery">
                @if (productDetails.images) {
                <owl-carousel-o [options]="productSlider" class="main-carousel">  
                    @for (image of productDetails.images; track $index) {
                    <ng-template carouselSlide>
                        <div class="slide-container">
                            <img [src]="image" class="product-main-image" alt="Product image {{$index + 1}}">
                        </div>
                    </ng-template>
                    } 
                </owl-carousel-o>
                }
            </div>

            <!-- Product Info -->
            <div class="product-info">
                <div class="product-header">
                    <h1 class="product-title special-font">{{productDetails.name}}</h1>

                    <div class="price-container">
                        <span class="current-price special-font">{{productDetails.price | currency:'GBP'}}</span>
                    </div>
                </div>

                <div class="product-description special-font">
                    <p>{{productDetails.shortdescription}}</p>
                </div>

                <div class="product-meta">
                   @if (productDetails.ratingAvg <= 5) {
                     <div class="rating">
                        <div class="stars">
                            @for (star of [1,2,3,4,5].slice(0,productDetails.ratingAvg); track $index) {
                            <i class="fas fa-star filled"></i>
                            }
                            @if (productDetails.ratingAvg % 1 != 0) {
                            <i class="fas fa-star-half-alt filled"></i>
                            }
                            <span class="rating-value">{{productDetails.ratingAvg}}</span>
                        </div>
                        @if (productDetails.stock > 0) {
                        <div class="stock-status in-stock">
                            <i class="fas fa-check-circle"></i> In Stock
                        </div>
                        }
                    </div>
                   }

                    <button class="add-to-cart-btn" (click)="addProductToCart(productDetails._id)">
                        <i class="fas fa-shopping-cart"></i>
                        Add to Cart
                    </button>
                </div>

                <div class="product-actions">
                    <button class="action-btn wishlist-btn" (click)="addProductToFavorites(productDetails._id)">
                        <i class="far fa-heart"></i> Add to Wishlist
                    </button>
                    <button class="action-btn share-btn" (click)="shareProductLink()">
                        <i class="fas fa-share-alt"></i> Share
                    </button>
                </div>
            </div>
        </div>

        <!-- Product Details -->
        <div class="product-details">
            <div class="details-header">
                <h2>About this product</h2>
                <div class="divider"></div>
            </div>
            <div class="details-content">
                <p>{{productDetails.longdescription}}</p>

                <div class="features">
                    <div class="feature">
                        <i class="fas fa-check-circle"></i>
                        <span>Eco-friendly materials</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>